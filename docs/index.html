<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AndroidX latest release notes</title>
  <style>
    /* See this website for inspiration: https://platformstatus.io/ */

    @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&family=Roboto:wght@400;700&display=swap');

    * {
      --heading-padding: 16px;
    }

    h1, h2, strong {
        font-family: "Roboto Slab", serif;
    }

    p, li {
        font-family: "Roboto", sans-serif;
        font-size: 15px;
    }

    h2 {
        display: inline-block;
        background: #b1e1f7;
        border: 1px solid;
        border-radius: 50px;
        padding-inline: var(--heading-padding);
        margin: 0;
        margin-block-start: 48px;
    }

    /* The date element */
    h2 + p {
      margin-block-start: 8px;
      margin-block-end: 4px;
      margin-inline-start: var(--heading-padding);
      font-size: 12px;
    }

    strong {
        background: #e0fdb5;
        border: 1px solid;
        border-radius: 50px;
        padding-inline: 16px;
        margin-inline-start: 24px;
    }

    pre {
      background: #eee;
      padding-block: 4px;
      padding-inline: 8px;
    }
  </style>
</head>
<body>

<a href="https://github.com/mahozad/androidx-release-notes" style="position: absolute; inset-block-start: 16px; inset-inline-end: 8px;">
  <svg width="48" viewBox="0 0 32.579 31.775" xmlns="http://www.w3.org/2000/svg">
    <path fill="#1b1817" d="m16.288 0c-8.995 0-16.288 7.293-16.288 16.29 0 7.197 4.667 13.302 11.14 15.457 0.815 0.149 1.112-0.354 1.112-0.786 0-0.386-0.014-1.411-0.022-2.77-4.531 0.984-5.487-2.184-5.487-2.184-0.741-1.881-1.809-2.382-1.809-2.382-1.479-1.011 0.112-0.991 0.112-0.991 1.635 0.116 2.495 1.679 2.495 1.679 1.453 2.489 3.813 1.77 4.741 1.354 0.148-1.053 0.568-1.771 1.034-2.178-3.617-0.411-7.42-1.809-7.42-8.051 0-1.778 0.635-3.232 1.677-4.371-0.168-0.412-0.727-2.068 0.159-4.311 0 0 1.368-0.438 4.48 1.67 1.299-0.361 2.693-0.542 4.078-0.548 1.383 6e-3 2.777 0.187 4.078 0.548 3.11-2.108 4.475-1.67 4.475-1.67 0.889 2.243 0.33 3.899 0.162 4.311 1.044 1.139 1.675 2.593 1.675 4.371 0 6.258-3.809 7.635-7.438 8.038 0.585 0.503 1.106 1.497 1.106 3.017 0 2.177-0.02 3.934-0.02 4.468 0 0.436 0.293 0.943 1.12 0.784 6.468-2.159 11.131-8.26 11.131-15.455 0-8.997-7.294-16.29-16.291-16.29"/>
  </svg>
</a>

<h1>Latest update</h1>
<hr>
<base href="https://developer.android.com/" target="_blank"/>

<h2>Media3: v1.3.0-alpha01</h2>
<p>January 15, 2024</p>
<ul>
 <li>Common Library: 
  <ul>
   <li>Implement support for <code translate="no" dir="ltr">android.resource://package/[type/]name</code> raw resource URIs where <code translate="no" dir="ltr">package</code> is different to the package of the current application. This has always been documented to work, but wasn't correctly implemented until now.</li>
   <li>Normalize MIME types set by app code or read from media to be fully lower-case.</li>
   <li>Define ads with a full <code translate="no" dir="ltr">MediaItem</code> instead of a single <code translate="no" dir="ltr">Uri</code> in <code translate="no" dir="ltr">AdPlaybackState</code>.</li>
   <li>Increase <code translate="no" dir="ltr">minSdk</code> to 19 (Android KitKat). This is <a href="https://android-developers.googleblog.com/2023/10/androidx-minsdkversion-19.html">aligned with all other AndroidX libraries</a>, and is required for us to upgrade to the latest versions of our AndroidX dependencies.</li>
  </ul></li>
 <li>ExoPlayer: 
  <ul>
   <li>Add <code translate="no" dir="ltr">PreloadMediaSource</code> and <code translate="no" dir="ltr">PreloadMediaPeriod</code> that allows apps to preload a content media source at a specific start position before playback. <code translate="no" dir="ltr">PreloadMediaSource</code> takes care of preparing the content media source to receive the <code translate="no" dir="ltr">Timeline</code>, preparing and caching the period at the given start position, selecting tracks and loading media data for the period. Apps control the preload progress by implementing <code translate="no" dir="ltr">PreloadMediaSource.PreloadControl</code> and set the preloaded source to the player for playback.</li>
   <li>Add <code translate="no" dir="ltr">ExoPlayer.setImageOutput</code> that allows apps to set <code translate="no" dir="ltr">ImageRenderer.ImageOutput</code>.</li>
   <li><code translate="no" dir="ltr">DefaultRenderersFactory</code> now provides an <code translate="no" dir="ltr">ImageRenderer</code> to the player by default with null <code translate="no" dir="ltr">ImageOutput</code> and <code translate="no" dir="ltr">ImageDecoder.Factory.DEFAULT</code>.</li>
   <li>Emit <code translate="no" dir="ltr">Player.Listener.onPositionDiscontinuity</code> event when silence is skipped (<a href="https://github.com/androidx/media/issues/765">#765</a>).</li>
   <li>Add experimental support for parsing subtitles during extraction. You can enable this using <code translate="no" dir="ltr">MediaSource.Factory.experimentalParseSubtitlesDuringExtraction()</code>.</li>
   <li>Support adaptive media sources with <code translate="no" dir="ltr">PreloadMediaSource</code>.</li>
   <li>Implement <code translate="no" dir="ltr">HttpEngineDataSource</code>, an <code translate="no" dir="ltr">HttpDataSource</code> using the <a href="https://developer.android.com/reference/android/net/http/HttpEngine">HttpEngine</a> API.</li>
  </ul></li>
 <li>Transformer: 
  <ul>
   <li>Add support for flattening H.265/HEVC SEF slow motion videos.</li>
   <li>Increase transmuxing speed, especially for 'remove video' edits.</li>
   <li>Add API to ensure that the output file starts on a video frame. This can make the output of trimming operations more compatible with player implementations that don't show the first video frame until its presentation timestamp (<a href="https://github.com/androidx/media/issues/829">#829</a>).</li>
  </ul></li>
 <li>Track Selection: 
  <ul>
   <li>Add <code translate="no" dir="ltr">DefaultTrackSelector.selectImageTrack</code> to enable image track selection.</li>
   <li>Add <code translate="no" dir="ltr">TrackSelectionParameters.isPrioritizeImageOverVideoEnabled</code> to determine whether to select an image track if both an image track and a video track are available. The default value is <code translate="no" dir="ltr">false</code> which means selecting a video track is prioritized.</li>
  </ul></li>
 <li>Extractors: 
  <ul>
   <li>Add additional AV1C parsing to MP4 extractor to retrieve <code translate="no" dir="ltr">ColorInfo.colorSpace</code>, <code translate="no" dir="ltr">ColorInfo.colorTransfer</code>, and <code translate="no" dir="ltr">ColorInfo.colorRange</code> values (<a href="https://github.com/androidx/media/pull/692">#692</a>).</li>
  </ul></li>
 <li>Video: 
  <ul>
   <li>Change the <code translate="no" dir="ltr">MediaCodecVideoRenderer</code> constructor that takes a <code translate="no" dir="ltr">VideoFrameProcessor.Factory</code> argument and replace it with a constructor that takes a <code translate="no" dir="ltr">VideoSinkProvider</code> argument. Apps that want to inject a custom <code translate="no" dir="ltr">VideoFrameProcessor.Factory</code> can instantiate a <code translate="no" dir="ltr">CompositingVideoSinkProvider</code> that uses the custom <code translate="no" dir="ltr">VideoFrameProcessor.Factory</code> and pass the video sink provider to <code translate="no" dir="ltr">MediaCodecVideoRenderer</code>.</li>
  </ul></li>
 <li>Text: 
  <ul>
   <li>Fix serialization of bitmap cues to resolve <code translate="no" dir="ltr">Tried to marshall a Parcel that contained Binder objects</code> error when using <code translate="no" dir="ltr">DefaultExtractorsFactory.setTextTrackTranscodingEnabled</code> (<a href="https://github.com/androidx/media/issues/836">#836</a>).</li>
   <li>CEA-708: Ignore <code translate="no" dir="ltr">rowLock</code> value. The CEA-708-E S-2023 spec states that <code translate="no" dir="ltr">rowLock</code> and <code translate="no" dir="ltr">columnLock</code> should both be assumed to be true, regardless of the values present in the stream (<code translate="no" dir="ltr">columnLock</code> support is not implemented, so it's effectively assumed to always be false).</li>
  </ul></li>
 <li>DRM: 
  <ul>
   <li>Play 'clear lead' unencrypted samples in DRM content immediately by default, even if the keys for the later encrypted samples aren't ready yet. This may lead to mid-playback stalls if the keys still aren't ready when the playback position reaches the encrypted samples (but previously playback wouldn't have started at all by this point). This behavior can be disabled with <a href="https://developer.android.com/reference/androidx/media3/common/MediaItem.DrmConfiguration.Builder#setPlayClearContentWithoutKey(boolean)"><code translate="no" dir="ltr">MediaItem.DrmConfiguration.Builder.setPlayClearContentWithoutKey</code></a> or <a href="https://developer.android.com/reference/androidx/media3/exoplayer/drm/DefaultDrmSessionManager.Builder#setPlayClearSamplesWithoutKeys(boolean)"><code translate="no" dir="ltr">DefaultDrmSessionManager.Builder.setPlayClearSamplesWithoutKeys</code></a>.</li>
  </ul></li>
 <li>IMA extension: 
  <ul>
   <li>Fix issue where DASH and HLS ads without the appropriate file extension can't be played.</li>
  </ul></li>
 <li>HLS Extension: 
  <ul>
   <li>Reduce <code translate="no" dir="ltr">HlsMediaPeriod</code> to package-private visibility. This type shouldn't be directly depended on from outside the HLS package.</li>
  </ul></li>
 <li>Decoder Extensions (FFmpeg, VP9, AV1, MIDI, etc.): 
  <ul>
   <li>MIDI decoder: Ignore SysEx event messages (<a href="https://github.com/androidx/media/pull/710">#710</a>).</li>
  </ul></li>
 <li>Test Utilities: 
  <ul>
   <li>Don't pause playback in <code translate="no" dir="ltr">TestPlayerRunHelper.playUntilPosition</code>. The test keeps the playback in a playing state, but suspends progress until the test is able to add assertions and further actions.</li>
  </ul></li>
 <li>Demo app: 
  <ul>
   <li>Add a shortform demo module to demo the usage of <code translate="no" dir="ltr">PreloadMediaSource</code> with the short-form content use case.</li>
  </ul></li>
</ul>
</body>
</html>
