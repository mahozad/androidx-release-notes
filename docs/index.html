<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AndroidX latest release notes</title>
  <style>
    /* See this website for inspiration: https://platformstatus.io/ */

    @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab:wght@400;700&family=Roboto:wght@400;700&display=swap');

    * {
      --heading-padding: 16px;
    }

    h1, h2, strong {
        font-family: "Roboto Slab", serif;
    }

    p, li {
        font-family: "Roboto", sans-serif;
        font-size: 15px;
    }

    h2 {
        display: inline-block;
        background: #b1e1f7;
        border: 1px solid;
        border-radius: 50px;
        padding-inline: var(--heading-padding);
        margin: 0;
        margin-block-start: 48px;
    }

    /* The date element */
    h2 + p {
      margin-block-start: 8px;
      margin-block-end: 4px;
      margin-inline-start: var(--heading-padding);
      font-size: 12px;
    }

    strong {
        background: #e0fdb5;
        border: 1px solid;
        border-radius: 50px;
        padding-inline: 16px;
        margin-inline-start: 24px;
    }

    pre {
      background: #eee;
      padding-block: 4px;
      padding-inline: 8px;
    }
  </style>
</head>
<body>

<a href="https://github.com/mahozad/androidx-release-notes" style="position: absolute; inset-block-start: 16px; inset-inline-end: 8px;">
  <svg width="48" viewBox="0 0 32.579 31.775" xmlns="http://www.w3.org/2000/svg">
    <path fill="#1b1817" d="m16.288 0c-8.995 0-16.288 7.293-16.288 16.29 0 7.197 4.667 13.302 11.14 15.457 0.815 0.149 1.112-0.354 1.112-0.786 0-0.386-0.014-1.411-0.022-2.77-4.531 0.984-5.487-2.184-5.487-2.184-0.741-1.881-1.809-2.382-1.809-2.382-1.479-1.011 0.112-0.991 0.112-0.991 1.635 0.116 2.495 1.679 2.495 1.679 1.453 2.489 3.813 1.77 4.741 1.354 0.148-1.053 0.568-1.771 1.034-2.178-3.617-0.411-7.42-1.809-7.42-8.051 0-1.778 0.635-3.232 1.677-4.371-0.168-0.412-0.727-2.068 0.159-4.311 0 0 1.368-0.438 4.48 1.67 1.299-0.361 2.693-0.542 4.078-0.548 1.383 6e-3 2.777 0.187 4.078 0.548 3.11-2.108 4.475-1.67 4.475-1.67 0.889 2.243 0.33 3.899 0.162 4.311 1.044 1.139 1.675 2.593 1.675 4.371 0 6.258-3.809 7.635-7.438 8.038 0.585 0.503 1.106 1.497 1.106 3.017 0 2.177-0.02 3.934-0.02 4.468 0 0.436 0.293 0.943 1.12 0.784 6.468-2.159 11.131-8.26 11.131-15.455 0-8.997-7.294-16.29-16.291-16.29"/>
  </svg>
</a>

<h1>Latest update</h1>
<hr>
<base href="https://developer.android.com/" target="_blank"/>

<h2>Media3: v1.2.0-alpha02</h2>
<ul>
 <li>Common Library: 
  <ul>
   <li>Upgrade <code translate="no" dir="ltr">androidx.annotation:annotation-experimental</code> to <code translate="no" dir="ltr">1.3.1</code>. This also introduces a transitive dependency on the Kotlin standard library from <code translate="no" dir="ltr">media3-common</code>. Apps can <a href="/guide/topics/media/exoplayer/shrinking#remove-kotlin-dep">downgrade to remove this dependency if they want</a>. Fixes https://issuetracker.google.com/251172715.</li>
   <li>Move <code translate="no" dir="ltr">ExoPlayer.setAudioAttributes</code> to the <code translate="no" dir="ltr">Player</code> interface.</li>
  </ul></li>
 <li>ExoPlayer: 
  <ul>
   <li>Add additional fields to Common Media Client Data (CMCD) logging: next object request (<code translate="no" dir="ltr">nor</code>) and next range request (<code translate="no" dir="ltr">nrr</code>) (<a href="https://github.com/google/ExoPlayer/issues/8699">#8699</a>).</li>
   <li>Add functionality to transmit Common Media Client Data (CMCD) data using query parameters (<a href="https://github.com/androidx/media/issues/553">#553</a>).</li>
   <li>Fix <code translate="no" dir="ltr">ConcurrentModificationException</code> in <code translate="no" dir="ltr">ExperimentalBandwidthMeter</code> (<a href="https://github.com/androidx/media/issues/612">#612</a>).</li>
   <li>Add <code translate="no" dir="ltr">MediaPeriodId</code> parameter to <code translate="no" dir="ltr">CompositeMediaSource.getMediaTimeForChildMediaTime</code>.</li>
   <li>Support <code translate="no" dir="ltr">ClippingMediaSource</code> (and other sources with period/window time offsets) in <code translate="no" dir="ltr">ConcatenatingMediaSource2</code> (<a href="https://github.com/google/ExoPlayer/issues/11226">#11226</a>).</li>
   <li>Change <code translate="no" dir="ltr">BaseRenderer.onStreamChanged()</code> to also receive a <code translate="no" dir="ltr">MediaPeriodId</code> argument.</li>
  </ul></li>
 <li>Transformer: 
  <ul>
   <li>Changed <code translate="no" dir="ltr">frameRate</code> and <code translate="no" dir="ltr">durationUs</code> parameters of <code translate="no" dir="ltr">SampleConsumer.queueInputBitmap</code> to <code translate="no" dir="ltr">TimestampIterator</code>.</li>
  </ul></li>
 <li>Extractors: 
  <ul>
   <li>Add <code translate="no" dir="ltr">BmpExtractor</code>.</li>
   <li>Add <code translate="no" dir="ltr">WebpExtractor</code>.</li>
   <li>Add <code translate="no" dir="ltr">HeifExtractor</code>.</li>
   <li>Add <a href="https://developer.apple.com/standards/qtff-2001.pdf">QuickTime classic</a> support to <code translate="no" dir="ltr">Mp4Extractor</code>.</li>
  </ul></li>
 <li>Audio: 
  <ul>
   <li>Add support for Opus gapless metadata during offload playback.</li>
   <li>Allow renderer recovery by disabling offload if failed at first write (<a href="https://github.com/androidx/media/issues/627">#627</a>).</li>
   <li>Enable Offload Scheduling by default for audio-only offloaded playback.</li>
   <li>Delete <code translate="no" dir="ltr">ExoPlayer.experimentalSetOffloadSchedulingEnabled</code> and <code translate="no" dir="ltr">AudioOffloadListener.onExperimentalOffloadSchedulingEnabledChanged</code>.</li>
   <li>Renamed <code translate="no" dir="ltr">onExperimentalSleepingForOffloadChanged</code> as <code translate="no" dir="ltr">onSleepingForOffloadChanged</code> and <code translate="no" dir="ltr">onExperimentalOffloadedPlayback</code> as <code translate="no" dir="ltr">onOffloadedPlayback</code>.</li>
  </ul></li>
 <li>Effect: 
  <ul>
   <li>Changed <code translate="no" dir="ltr">frameRate</code> and <code translate="no" dir="ltr">durationUs</code> parameters of <code translate="no" dir="ltr">VideoFrameProcessor.queueInputBitmap</code> to <code translate="no" dir="ltr">TimestampIterator</code>.</li>
  </ul></li>
 <li>IMA extension: 
  <ul>
   <li>Fix bug where a multi-period DASH live stream that is not the first item in a playlist can throw an exception (<a href="https://github.com/androidx/media/issues/571">#571</a>).</li>
   <li>Release StreamManager before calling <code translate="no" dir="ltr">AdsLoader.destroy()</code></li>
   <li>Bump IMA SDK version to 3.31.0.</li>
  </ul></li>
 <li>Session: 
  <ul>
   <li>Set the notifications foreground service behavior to <code translate="no" dir="ltr">FOREGROUND_SERVICE_IMMEDIATE</code> in <code translate="no" dir="ltr">DefaultMediaNotificationProvider</code> (<a href="https://github.com/androidx/media/issues/167">#167</a>).</li>
   <li>Use only <code translate="no" dir="ltr">android.media.session.MediaSession.setMediaButtonBroadcastReceiver()</code> above API 31 to avoid problems with deprecated API on Samsung devices (<a href="https://github.com/androidx/media/issues/167">#167</a>).</li>
   <li>Use the media notification controller as proxy to set available commands and custom layout used to populate the notification and the platform session.</li>
   <li>Convert media button events that are received by <code translate="no" dir="ltr">MediaSessionService.onStartCommand()</code> within Media3 instead of routing them to the platform session and back to Media3. With this, the caller controller is always the media notification controller and apps can easily recognize calls coming from the notification in the same way on all supported API levels.</li>
   <li>Fix bug where <code translate="no" dir="ltr">MediaController.getCurrentPosition()</code> is not advancing when connected to a legacy <code translate="no" dir="ltr">MediaSessionCompat</code>.</li>
   <li>Add <code translate="no" dir="ltr">MediaLibrarySession.getSubscribedControllers(mediaId)</code> for convenience.</li>
   <li>Override <code translate="no" dir="ltr">MediaLibrarySession.Callback.onSubscribe()</code> to assert the availability of the <code translate="no" dir="ltr">parentId</code> for which the controller subscribes. If successful, the subscription is accepted and <code translate="no" dir="ltr">notifyChildrenChanged()</code> is called immediately to inform the browser (<a href="https://github.com/androidx/media/issues/561">#561</a>).</li>
  </ul></li>
 <li>RTSP Extension: 
  <ul>
   <li>Fix a race condition that could lead to <code translate="no" dir="ltr">IndexOutOfBoundsException</code> when falling back to TCP, or playback hanging in some situations.</li>
   <li>Check state in RTSP setup when returning loading state of <code translate="no" dir="ltr">RtspMediaPeriod</code> (<a href="https://github.com/androidx/media/issues/577">#577</a>).</li>
   <li>Ignore custom RTSP request methods in Options response public header (<a href="https://github.com/androidx/media/issues/613">#613</a>).</li>
  </ul></li>
 <li>Leanback extension: 
  <ul>
   <li>Fix bug where disabling a surface can cause an <code translate="no" dir="ltr">ArithmeticException</code> in Leanback code (<a href="https://github.com/androidx/media/issues/617">#617</a>).</li>
  </ul></li>
</ul>
</body>
</html>
